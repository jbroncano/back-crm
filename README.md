# Eclipse Starter for Jakarta EE
This is a sample application generated by the Eclipse Foundation starter for Jakarta EE.

You can run the application by executing the following command from the directory where this file resides. 
Please ensure you have installed a [Java SE implementation](https://adoptium.net) appropriate for your 
Jakarta EE version and runtime choice (this sample assumes Java SE 11). Note, 
the [Maven Wrapper](https://maven.apache.org/wrapper/) is already included in the project, so a Maven install 
is not actually needed. You may first need to execute `chmod +x mvnw`.

```
./mvnw clean package wildfly:run
```

Once the runtime starts, you can access the project at [http://localhost:8080/crm](http://localhost:8080/crm).
# üìò CRM API - Documentaci√≥n de Endpoints

Este repositorio contiene ejemplos pr√°cticos de c√≥mo interactuar con los servicios REST del sistema CRM. Los endpoints est√°n organizados por recurso y acompa√±ados con comandos `cURL` para facilitar las pruebas.

---

## üîê Autenticaci√≥n

### üßæ Login

Realiza la autenticaci√≥n con credenciales de usuario.

**Endpoint:**
```
POST /crm/api/login
```

**Content-Type:** `application/x-www-form-urlencoded`

**Par√°metros:**

| Nombre   | Tipo     | Requerido | Descripci√≥n          |
|----------|----------|-----------|----------------------|
| username | string   | ‚úÖ        | Nombre de usuario    |
| password | string   | ‚úÖ        | Contrase√±a del usuario |

**Ejemplo cURL:**
```bash
curl --location 'http://localhost:8080/crm/api/login' \
--header 'Content-Type: application/x-www-form-urlencoded' \
--data-urlencode 'username=admin' \
--data-urlencode 'password=admin'
```

---

## üë§ Personas

### üìÑ Obtener todas las personas

**Endpoint:**
```
GET /crm/api/persona
```

**Ejemplo cURL:**
```bash
curl --location 'http://localhost:8080/crm/api/persona'
```

### ‚ûï Crear prospecto

**Endpoint:**
```
POST /crm/api/persona/crearProspecto
```

**Content-Type:** `application/json`

**Ejemplo cURL:**
```bash
curl --location 'http://localhost:8080/crm/api/persona/crearProspecto' \
--header 'Content-Type: application/json' \
--data '{
  "infoPersonaDTO": {
    "identificacion": "1723456789",
    "nombre": "Carlos",
    "apellido": "Mart√≠nez",
    "direccion": "Av. Amazonas y NNUU",
    "estado": "Activo",
    "razonSocial": "Inversiones CM S.A."
  }
}'
```

---

## üõ°Ô∏è Roles

### ‚ûï Crear nuevo rol

**Endpoint:**
```
POST /crm/api/rol/
```

**Content-Type:** `application/json`

**Ejemplo cURL:**
```bash
curl --location 'http://localhost:8080/crm/api/rol/' \
--header 'Content-Type: application/json' \
--data '{
  "nombre": "Vendedor",
  "descripcion": "Gesti√≥n de clientes, prospectos y proformas.",
  "estado": "Activo"
}'
```

### üìÑ Obtener todos los roles

**Endpoint:**
```
GET /crm/api/rol/
```

**Ejemplo cURL:**
```bash
curl --location 'http://localhost:8080/crm/api/rol/'
```

---

## üì¶ Productos

### ‚ûï Crear nuevo producto

**Endpoint:**
```
POST /crm/api/producto/
```

**Content-Type:** `application/json`

**Ejemplo cURL:**
```bash
curl --location 'http://localhost:8080/crm/api/producto/' \
--header 'Content-Type: application/json' \
--data '{
  "nombre": "Producto A",
  "descripcion": "Este es un producto de ejemplo",
  "precio": 49.99,
  "estado": "Activo"
}'
```

---

## üìÑ Proformas

### ‚ûï Crear nueva proforma

**Endpoint:**
```
POST /crm/api/proforma/
```

**Content-Type:** `application/json`

**Ejemplo cURL:**
```bash
curl --location 'http://localhost:8080/crm/api/proforma/' \
--header 'Content-Type: application/json' \
--data '{
  "proformaCabDTO": {
    "numero": "PRO-001",
    "feValidez": "2025-04-06T12:30:00",
    "condicionPago": "Contado",
    "formaPago": "Transferencia",
    "estado": "ACTIVO",
    "impuesto": 12.0,
    "descuento": 5.0,
    "persona": {
      "idPersona": 1
    }
  },
  "lstProformaDetDTO": [
    {
      "producto": {
        "idProducto": 4
      },
      "cantidad": "2",
      "estado": "Activo"
    }
  ]
}'
```

### üîç Buscar detalles de una proforma

**Endpoint:**
```
POST /crm/api/proforma/buscarDet
```

**Content-Type:** `application/json`

**Ejemplo cURL:**
```bash
curl --location 'http://localhost:8080/crm/api/proforma/buscarDet' \
--header 'Content-Type: application/json' \
--data '{
  "proformaCabDTO": {
    "idProformaCab": "4",
    "estado": "Activo"
  }
}'
```

---

## üìå Notas

- Aseg√∫rate de que los IDs usados (persona, producto, proforma) existan en tu base de datos.
